2025-12-04 11:36:25,720 - INFO - Starting audio ingestion for /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav
2025-12-04 11:36:25,819 - INFO - Starting transcription...
2025-12-04 11:36:25,819 - INFO - Loading transcription from cache: /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/data/cache/transcriptions/clip_youtube_jAlKYYr1bpY_240_60.json
2025-12-04 11:36:25,821 - INFO - Transcription complete in 0.00s
2025-12-04 11:36:25,821 - INFO - Running WhisperPlus Diarization Workflow...
objc[83421]: Class AVFFrameReceiver is implemented in both /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/.venv/lib/python3.12/site-packages/av/.dylibs/libavdevice.62.1.100.dylib (0x168fe43a8) and /opt/homebrew/Cellar/ffmpeg/7.1/lib/libavdevice.61.3.100.dylib (0x17b278328). This may cause spurious casting failures and mysterious crashes. One of the duplicates must be removed or renamed.
objc[83421]: Class AVFAudioReceiver is implemented in both /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/.venv/lib/python3.12/site-packages/av/.dylibs/libavdevice.62.1.100.dylib (0x168fe43f8) and /opt/homebrew/Cellar/ffmpeg/7.1/lib/libavdevice.61.3.100.dylib (0x17b278378). This may cause spurious casting failures and mysterious crashes. One of the duplicates must be removed or renamed.
Device set to use mps
Using `chunk_length_s` is very experimental with seq2seq models. The results will not necessarily be entirely accurate and will have caveats. More information: https://github.com/huggingface/transformers/pull/20104. Ignore this warning with pipeline(..., ignore_warning=True). To use Whisper for long-form transcription, use rather the model's `generate` method directly as the model relies on it's own chunking mechanism (cf. Whisper original paper, section 3.8. Long-form Transcription).
2025-12-04 11:36:31,059 - ERROR - WhisperPlus Diarization failed: Pipeline.from_pretrained() got an unexpected keyword argument 'use_auth_token'
2025-12-04 11:36:31,066 - INFO - Dry run: Skipping manifest update.
/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/audio_ingestion.py:132: PydanticDeprecatedSince20: The `json` method is deprecated; use `model_dump_json` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
  "config": json.loads(config.json()) if hasattr(config, 'json') else config.dict()
2025-12-04 11:36:31,067 - INFO - Dry run results saved to temp file: /var/folders/2d/5pqypl0x3px_4z4pbqxwczk80000gn/T/dry_run_nkcmvnjr.json

--- Dry Run Metadata ---
Command: python audio_ingestion.py diarize data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav --workflow whisperplus_diarize --dry-run
CWD: /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark
Workflow: whisperplus_diarize
------------------------

{
  "metadata": {
    "command": "python audio_ingestion.py diarize data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav --workflow whisperplus_diarize --dry-run",
    "cwd": "/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark",
    "config": {
      "clip_path": "/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav",
      "workflow": {
        "name": "whisperplus_diarize",
        "threshold": 0.5,
        "window": 0,
        "cluster_threshold": 0.5,
        "id_threshold": 0.4,
        "model_name": null,
        "min_speakers": null,
        "max_speakers": null
      },
      "output_dir": ".",
      "append_to": null,
      "identify": false,
      "overwrite": false,
      "verbose": false,
      "dry_run": true
    }
  },
  "transcript": []
}

Dry run results saved to: /var/folders/2d/5pqypl0x3px_4z4pbqxwczk80000gn/T/dry_run_nkcmvnjr.json
