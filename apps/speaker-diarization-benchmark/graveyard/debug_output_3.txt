2025-12-04 11:37:59,994 - INFO - Starting audio ingestion for /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav
2025-12-04 11:38:00,094 - INFO - Starting transcription...
2025-12-04 11:38:00,094 - INFO - Loading transcription from cache: /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/data/cache/transcriptions/clip_youtube_jAlKYYr1bpY_240_60.json
2025-12-04 11:38:00,096 - INFO - Transcription complete in 0.00s
2025-12-04 11:38:00,097 - INFO - Running WhisperPlus Diarization Workflow...
objc[86040]: Class AVFFrameReceiver is implemented in both /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/.venv/lib/python3.12/site-packages/av/.dylibs/libavdevice.62.1.100.dylib (0x13d6703a8) and /opt/homebrew/Cellar/ffmpeg/7.1/lib/libavdevice.61.3.100.dylib (0x15c970328). This may cause spurious casting failures and mysterious crashes. One of the duplicates must be removed or renamed.
objc[86040]: Class AVFAudioReceiver is implemented in both /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/.venv/lib/python3.12/site-packages/av/.dylibs/libavdevice.62.1.100.dylib (0x13d6703f8) and /opt/homebrew/Cellar/ffmpeg/7.1/lib/libavdevice.61.3.100.dylib (0x15c970378). This may cause spurious casting failures and mysterious crashes. One of the duplicates must be removed or renamed.
Device set to use mps
Using `chunk_length_s` is very experimental with seq2seq models. The results will not necessarily be entirely accurate and will have caveats. More information: https://github.com/huggingface/transformers/pull/20104. Ignore this warning with pipeline(..., ignore_warning=True). To use Whisper for long-form transcription, use rather the model's `generate` method directly as the model relies on it's own chunking mechanism (cf. Whisper original paper, section 3.8. Long-form Transcription).
/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/.venv/lib/python3.12/site-packages/speechbrain/utils/torch_audio_backend.py:57: UserWarning: torchaudio._backend.list_audio_backends has been deprecated. This deprecation is part of a large refactoring effort to transition TorchAudio into a maintenance phase. The decoding and encoding capabilities of PyTorch for both audio and video are being consolidated into TorchCodec. Please see https://github.com/pytorch/audio/issues/3902 for more information. It will be removed from the 2.9 release. 
  available_backends = torchaudio.list_audio_backends()
2025-12-04 11:38:07,153 - DEBUG - Registered checkpoint save hook for _speechbrain_save
2025-12-04 11:38:07,153 - DEBUG - Registered checkpoint load hook for _speechbrain_load
2025-12-04 11:38:07,153 - DEBUG - Registered checkpoint save hook for save
2025-12-04 11:38:07,153 - DEBUG - Registered checkpoint load hook for load
2025-12-04 11:38:07,191 - INFO - Applied quirks (see `speechbrain.utils.quirks`): [allow_tf32, disable_jit_profiling]
2025-12-04 11:38:07,192 - INFO - Excluded quirks specified by the `SB_DISABLE_QUIRKS` environment (comma-separated list): []
2025-12-04 11:38:07,192 - DEBUG - Registered checkpoint save hook for _save
2025-12-04 11:38:07,192 - DEBUG - Registered checkpoint load hook for _recover
2025-12-04 11:38:07,264 - ERROR - WhisperPlus Diarization failed: Weights only load failed. This file can still be loaded, to do so you have two options, [1mdo those steps only if you trust the source of the checkpoint[0m. 
	(1) In PyTorch 2.6, we changed the default value of the `weights_only` argument in `torch.load` from `False` to `True`. Re-running `torch.load` with `weights_only` set to `False` will likely succeed, but it can result in arbitrary code execution. Do it only if you got the file from a trusted source.
	(2) Alternatively, to load with `weights_only=True` please check the recommended steps in the following error message.
	WeightsUnpickler error: Unsupported global: GLOBAL torch.torch_version.TorchVersion was not an allowed global by default. Please use `torch.serialization.add_safe_globals([torch.torch_version.TorchVersion])` or the `torch.serialization.safe_globals([torch.torch_version.TorchVersion])` context manager to allowlist this global if you trust this class/function.

Check the documentation of torch.load to learn more about types accepted by default with weights_only https://pytorch.org/docs/stable/generated/torch.load.html.
2025-12-04 11:38:07,272 - INFO - Dry run: Skipping manifest update.
/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/audio_ingestion.py:132: PydanticDeprecatedSince20: The `json` method is deprecated; use `model_dump_json` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
  "config": json.loads(config.json()) if hasattr(config, 'json') else config.dict()
2025-12-04 11:38:07,273 - INFO - Dry run results saved to temp file: /var/folders/2d/5pqypl0x3px_4z4pbqxwczk80000gn/T/dry_run_ifktxaw1.json

--- Dry Run Metadata ---
Command: python audio_ingestion.py diarize data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav --workflow whisperplus_diarize --dry-run
CWD: /Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark
Workflow: whisperplus_diarize
------------------------

{
  "metadata": {
    "command": "python audio_ingestion.py diarize data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav --workflow whisperplus_diarize --dry-run",
    "cwd": "/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark",
    "config": {
      "clip_path": "/Users/laptop/Development/Personal/psuedonymous/toolshed/apps/speaker-diarization-benchmark/data/clips/clip_youtube_jAlKYYr1bpY_240_60.wav",
      "workflow": {
        "name": "whisperplus_diarize",
        "threshold": 0.5,
        "window": 0,
        "cluster_threshold": 0.5,
        "id_threshold": 0.4,
        "model_name": null,
        "min_speakers": null,
        "max_speakers": null
      },
      "output_dir": ".",
      "append_to": null,
      "identify": false,
      "overwrite": false,
      "verbose": false,
      "dry_run": true
    }
  },
  "transcript": []
}

Dry run results saved to: /var/folders/2d/5pqypl0x3px_4z4pbqxwczk80000gn/T/dry_run_ifktxaw1.json
